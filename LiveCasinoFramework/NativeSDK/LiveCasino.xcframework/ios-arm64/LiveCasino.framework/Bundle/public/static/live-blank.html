<html>
  <body></body>
  <script>
    /**
     * Storage event doesn't work in UC HD browser, that's why polling strategy was used here
     */
    var LOCAL_STORAGE_POLLING_INTERVAL = 100;
    var POLLING_TIMEOUT = 25 * 1000; // Removes storage polling in case something went wrong on the opener side
    var STORAGE_ITEM_KEY_URL_PARAM = 'storageItemKey';
    var storageItemKey = getParameterByName(STORAGE_ITEM_KEY_URL_PARAM);

    var intervalRef = setInterval(function () {
      var url = localStorage.getItem(storageItemKey);

      if (url) {
        clearPollingInterval();
        window.location.href = url;
      }
    }, LOCAL_STORAGE_POLLING_INTERVAL);

    setTimeout(clearPollingInterval, POLLING_TIMEOUT);

    function clearPollingInterval() {
      clearInterval(intervalRef);
      intervalRef = undefined;
      localStorage.removeItem(storageItemKey);
    }

    /**
     * Simple url params parser
     *
     * @param {string} name Url param name
     * @return {?string}
     */
    function getParameterByName(name) {
      var url = window.location.href;
      var normalizedName = name.replace(/[\[\]]/g, '\\$&');
      var regex = new RegExp('[?&]' + normalizedName + '(=([^&#]*)|&|#|$)');
      var results = regex.exec(url);

      if (!results || !results[2]) {
        return undefined;
      }

      return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }
  </script>
</html>
